<!DOCTYPE html>
<html>
    <head>
        <title>Benchmarking</title>
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>

        <script>
            $(function() {

                console.log('Welcome to Benchmarking!');

                //var Sock = null;

                function connect() {
                    Sock = new SockJS('http://127.0.0.1:4000');

                    Sock.onopen = function() {
                        console.log('opened sock');
                    };

                    Sock.onmessage = function(e) {
                        //console.log(e)

                        $( "#status").text(e.data);
                        alert(e.data)


                    };

                    Sock.onclose = function() {
                        console.log('disconnected.');
                        Sock = null;
                    };

                }   //connect

                function disconnect() {
                    console.log('disconnecting....');
                    Sock.close();
                }

                connect();

                $( "form" ).submit(function(event) {

                    var username = $( "#USERNAME" ).val();
                    var password = $( "#PASSWORD" ).val();
                    var verify_password = $( "#VERIFY_PASSWORD").val();

                    if (password === verify_password) {
                        console.log('======================');
                        var info = "{ \"username\" : \"" + username + "\" , "
                            + " \"password\" : \"" + password + "\" }";

                        console.log(info);
                        Sock.send(info);
                        $( "#status").text();

                    }
                    event.preventDefault();

                }); //form submission


            }); //on page load

        </script>
</head>
<body>
    <form>
      <div id="status" >

      </div>

      <div>USERNAME: <input type="text" name="USERNAME" id="USERNAME"></div>
      <div>PASSWORD: <input type="password" name="PASSWORD" id="PASSWORD"></div>
      <div>VERIFY PASSWORD: <input type="password" name="VERIFY_PASSWORD"  id="VERIFY_PASSWORD"></div>

      <div>
        <input type="submit" name="submit" value="Submit" id="submit">
      </div>
    </form>
</body>
</html>
